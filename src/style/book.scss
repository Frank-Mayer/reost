$transitionDuration: 250ms;

#bookContainerContainer {
  transition: all $transitionDuration ease-in-out;

  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: 2;
  perspective: 1000px;

  #bookContainer {
    transition: all $transitionDuration ease-in-out;

    background-image: url("img/book.webp");
    background-repeat: no-repeat;
    background-size: cover;
    background-position-x: center;
    background-position-y: top;
    position: fixed;
    z-index: 3;
    bottom: 0;
    image-rendering: crisp-edges;
    image-rendering: pixelated;

    #content {
      overflow-x: hidden;
      overflow-y: auto;
      width: 100%;
      height: 100%;
    }
  }

  $dof: 4px;

  &.tilted #bookContainer,
  &.down #bookContainer {
    -webkit-filter: blur($dof);
    filter: blur($dof);
  }

  &:not(.tilted):not(.down) {
    -webkit-backdrop-filter: blur($dof);
    backdrop-filter: blur($dof);
  }

  $transformRotateX: 75deg;
  &.tilted:not(.down) #bookContainer {
    $transformTranslateY: 85%;
    -o-transform: rotateX($transformRotateX) translateY($transformTranslateY);
    -ms-transform: rotateX($transformRotateX) translateY($transformTranslateY);
    -moz-transform: rotateX($transformRotateX) translateY($transformTranslateY);
    -webkit-transform: rotateX($transformRotateX)
      translateY($transformTranslateY);
    transform: rotateX($transformRotateX) translateY($transformTranslateY);
  }

  &.down #bookContainer {
    $transformTranslateY: 150vh;
    -o-transform: rotateX($transformRotateX) translateY($transformTranslateY) !important;
    -ms-transform: rotateX($transformRotateX) translateY($transformTranslateY) !important;
    -moz-transform: rotateX($transformRotateX) translateY($transformTranslateY) !important;
    -webkit-transform: rotateX($transformRotateX)
      translateY($transformTranslateY) !important;
    transform: rotateX($transformRotateX) translateY($transformTranslateY) !important;
  }

  // Landscape
  $landscapeMinWidth: 100vh/357 * 290;
  @media only screen and (min-width: $landscapeMinWidth) {
    #bookContainer {
      $space: 5vh;
      $height: 100vh - $space;
      $width: $height / 357 * 290;
      $left: $width / 2;

      height: $height;
      width: $width;
      left: calc(50vw - #{$left});
      padding: 7.5vh;
    }
  }

  // Portrait
  $portraitMinHeight: 100vw / 290 * 357;
  @media only screen and (min-height: $portraitMinHeight) {
    #bookContainer {
      $space: 5vw;
      $width: 100vw - $space;
      $height: $width / 290 * 357;
      $left: 50vw - $width / 2;

      height: $height;
      width: $width;
      left: $left;
      right: $left;
      padding: 7.5vw;
    }
  }
}
